name: Pinchflat
slug: pinchflat
version: "0.10.0"
description: Self-hosted YouTube manager (yt-dlp) with web UI
url: https://github.com/kieraneglin/pinchflat
arch: [aarch64, amd64]
startup: services
boot: auto
init: false            # we run /run.sh directly; no S6 services needed
ingress: true
ingress_port: 8945
panel_icon: mdi:youtube
panel_title: Pinchflat
ports:
  8945/tcp: 8945       # optional if you only want ingress
map:
  - media:rw           # where downloads will go (/media/youtube)
  - addon_config:rw    # optional: expose /config for user-visible files/logs
watchdog: http://[HOST]:[PORT:8945]/healthcheck
options: {}
schema: {}
environment:
  # BEAM memory tuning
  ELIXIR_ERL_OPTIONS: "+S 2:2 +fnu"
  ERL_AFLAGS: "-emu_type emu"
  MALLOC_ARENA_MAX: "2"           # (no-op on musl/Alpine, harmless)
  # App/runtime
  PHX_SERVER: "true"
  YT_DLP_WORKER_CONCURRENCY: "1"
  DOWNLOADS_DIR: "/media/YouTube"  # Pinchflat writes here; Emby reads it